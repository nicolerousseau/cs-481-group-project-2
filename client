import java.net.*;
import java.io.*;

public class MessageWriter
{
 private static final int E_FAILURE = 1;

 public static void main(String[] args)
 {
  if (args.length < 2)
  {
   System.err.println("usage: java MessageWriter hostname port");
   System.exit(E_FAILURE);
  }
  int port = Integer.parseInt(args[1]);
  Socket sock = null;
  PrintWriter sw = null;
  try
  {
   sock = new Socket(args[0], port);
   sw = new PrintWriter(sock.getOutputStream(), true);
  }
  catch (UnknownHostException e)
  {
   System.err.println("MessageWriter: " + e);
   System.exit(E_FAILURE);
  }
  catch (IOException e)
  {
   System.err.println("MessageWriter: " + e);
   System.exit(E_FAILURE);
  }
  BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
  while (true)
  {
   System.out.print(">>> ");
   System.out.flush();
   String line;
   try
   {
    line = br.readLine();
   }
   catch (IOException e)
   {
    break;
   }
   if (line == null)
    break;
   else if (!line.isEmpty())
    sw.println(line);
  }
 }
}


import java.net.*;
import java.io.*;

public class MessageReader
{
 private static final int E_FAILURE = 1;

 public static void main(String[] args)
 {
  if (args.length < 1)
  {
   System.err.println("usage: java MessageReader port");
   System.exit(E_FAILURE);
  }
  int port = Integer.parseInt(args[0]);
  try {
   ServerSocket sock = new ServerSocket(port);
   while (true)
   {
    Socket client = sock.accept();
    BufferedReader bin = new BufferedReader(new InputStreamReader(client.getInputStream()));
    String line;
    while ((line = bin.readLine()) != null)
     System.out.println(line);
    client.close();
   }
  }
  catch (IOException ioe)
  {
   System.err.println(ioe);
  }
 }
}
